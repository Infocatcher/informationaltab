<?xml version="1.0"?>

<!DOCTYPE bindings [
	<!ENTITY % mainDTD SYSTEM "chrome://informationaltab/locale/" >
	%mainDTD;
]>

<bindings id="informationaltabBindings"
	xmlns="http://www.mozilla.org/xbl"
	xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
	xmlns:xbl="http://www.mozilla.org/xbl">

<binding id="tab-label" extends="xul:hbox">
	<content>
		<xul:stack xbl:inherits="flex">
			<xul:vbox
				flex="1">
				<xul:spacer flex="1"/>
				<xul:progressmeter
					class="tab-progress"
					mode="normal"
					xbl:inherits="value=informationaltab-progress"/>
			</xul:vbox>
			<xul:hbox
				flex="1"
				align="center">
				<xul:label
					class="tab-real-text"
					flex="1"
					xbl:inherits="value,crop,accesskey"/>
			</xul:hbox>
		</xul:stack>
	</content>
	<implementation>
		<constructor><![CDATA[
			var node = this.parentNode;
			while (node.localName != 'tab')
				node = node.parentNode;
			node.addEventListener('DOMAttrModified', this.eventHandler, false);
		]]></constructor>
		<destructor><![CDATA[
			var node = this.parentNode;
			while (node.localName != 'tab')
				node = node.parentNode;
			node.removeEventListener('DOMAttrModified', this.eventHandler, false);
		]]></destructor>
		<field name="eventHandler"><![CDATA[
			({
				mOwner : this,
				handleEvent : function(aEvent)
				{
					if (aEvent.attrName != 'label') return;

					this.mOwner.setAttribute('value', aEvent.target.getAttribute('label'));
				}
			})
		]]></field>
	</implementation>
</binding>


</bindings>
